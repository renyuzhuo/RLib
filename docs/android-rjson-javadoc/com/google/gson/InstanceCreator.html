<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_91) on Thu Oct 27 14:13:34 CST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>InstanceCreator (rjson 0.0.1 API)</title>
<meta name="date" content="2016-10-27">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InstanceCreator (rjson 0.0.1 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],4:["t3","抽象方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../index-all.html">索引</a></li>
<li><a href="../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/google/gson/GsonBuilder.html" title="com.google.gson中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../com/google/gson/JsonArray.html" title="com.google.gson中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/google/gson/InstanceCreator.html" target="_top">框架</a></li>
<li><a href="InstanceCreator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.google.gson</div>
<h2 title="接口 InstanceCreator" class="title">接口 InstanceCreator&lt;T&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">类型参数:</span></dt>
<dd><code>T</code> - the type of object that will be created by this implementation.</dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">InstanceCreator&lt;T&gt;</span></pre>
<div class="block">This interface is implemented to create instances of a class that does not define a no-args
 constructor. If you can modify the class, you should instead add a private, or public
 no-args constructor. However, that is not possible for library classes, such as JDK classes, or
 a third-party library that you do not have source-code of. In such cases, you should define an
 instance creator for the class. Implementations of this interface should be registered with
 <a href="../../../com/google/gson/GsonBuilder.html#registerTypeAdapter-java.lang.reflect.Type-java.lang.Object-"><code>GsonBuilder.registerTypeAdapter(Type, Object)</code></a> method before Gson will be able to use
 them.
 <p>Let us look at an example where defining an InstanceCreator might be useful. The
 <code>Id</code> class defined below does not have a default no-args constructor.</p>

 <pre>
 public class Id&lt;T&gt; {
   private final Class&lt;T&gt; clazz;
   private final long value;
   public Id(Class&lt;T&gt; clazz, long value) {
     this.clazz = clazz;
     this.value = value;
   }
 }
 </pre>

 <p>If Gson encounters an object of type <code>Id</code> during deserialization, it will throw an
 exception. The easiest way to solve this problem will be to add a (public or private) no-args
 constructor as follows:</p>

 <pre>
 private Id() {
   this(Object.class, 0L);
 }
 </pre>

 <p>However, let us assume that the developer does not have access to the source-code of the
 <code>Id</code> class, or does not want to define a no-args constructor for it. The developer
 can solve this problem by defining an <code>InstanceCreator</code> for <code>Id</code>:</p>

 <pre>
 class IdInstanceCreator implements InstanceCreator&lt;Id&gt; {
   public Id createInstance(Type type) {
     return new Id(Object.class, 0L);
   }
 }
 </pre>

 <p>Note that it does not matter what the fields of the created instance contain since Gson will
 overwrite them with the deserialized values specified in Json. You should also ensure that a
 <i>new</i> object is returned, not a common object since its fields will be overwritten.
 The developer will need to register <code>IdInstanceCreator</code> with Gson as follows:</p>

 <pre>
 Gson gson = new GsonBuilder().registerTypeAdapter(Id.class, new IdInstanceCreator()).create();
 </pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">抽象方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../com/google/gson/InstanceCreator.html" title="InstanceCreator中的类型参数">T</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/google/gson/InstanceCreator.html#createInstance-java.lang.reflect.Type-">createInstance</a></span>(java.lang.reflect.Type&nbsp;type)</code>
<div class="block">Gson invokes this call-back method during deserialization to create an instance of the
 specified type.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="createInstance-java.lang.reflect.Type-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>createInstance</h4>
<pre><a href="../../../com/google/gson/InstanceCreator.html" title="InstanceCreator中的类型参数">T</a>&nbsp;createInstance(java.lang.reflect.Type&nbsp;type)</pre>
<div class="block">Gson invokes this call-back method during deserialization to create an instance of the
 specified type. The fields of the returned instance are overwritten with the data present
 in the Json. Since the prior contents of the object are destroyed and overwritten, do not
 return an instance that is useful elsewhere. In particular, do not return a common instance,
 always use <code>new</code> to create a new instance.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>type</code> - the parameterized T represented as a <code>Type</code>.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>a default object instance of type T.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../index-all.html">索引</a></li>
<li><a href="../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/google/gson/GsonBuilder.html" title="com.google.gson中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../com/google/gson/JsonArray.html" title="com.google.gson中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/google/gson/InstanceCreator.html" target="_top">框架</a></li>
<li><a href="InstanceCreator.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
